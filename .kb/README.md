# Knowledge Base (KB) 사용 가이드 v2.3

## 1. 핵심 철학: "만드는 사람"을 위한 지식 창고

이 `.kb` 폴더는 프로젝트를 **만드는 사람들**(개발팀, PM, AI 협업가)을 위한 내부 지식 창고입니다. 프로젝트의 이력, 의사결정 과정, 기술적 논의 등 **"이것을 어떻게, 왜 만들었는가?"**에 대한 모든 것을 기록합니다.

반면, **"이것을 어떻게 사용하는가?"**에 대한 문서는 각 프로젝트 폴더 내의 `doc/` 디렉토리에 작성합니다. (예: `tetris/doc/how_to_play.md`)

| 관점 (Aspect) | `.kb` (Knowledge Base) | `[프로젝트명]/doc` (User Docs) |
| :--- | :--- | :--- |
| **대상 (Audience)** | 내부 개발팀, PM, AI 협업가 | 최종 사용자, API/라이브러리 소비자 |
| **목적 (Purpose)** | **Why & How it was made** (제작 과정 기록) | **How to use it** (사용법 안내) |
| **주요 내용** | ADR, 기술 명세, 설계도, 리뷰/디버깅 로그 | 설치 가이드, 튜토리얼, API 레퍼런스 |

## 2. 폴더 구조 (v2.2)

`.kb`는 **정적인 프로젝트 문서**를 관리하는 `projects`와 **시간순의 작업 기록**을 관리하는 `sessions` 두 개의 상위 폴더로 구성됩니다.

### 📂 `projects/[프로젝트명]/`
프로젝트에 대한 모든 정적 문서를 이곳에 저장합니다.

-   `project-overview.md`: **(필수)** 프로젝트 개요, 기술 스택, **문서화 수준**을 정의하는 가장 중요한 파일.
-   `spec.md`: 기능 요구사항 명세.
-   `design/`: 클래스 다이어그램, 시스템 아키텍처 등 시각적 설계 자료.
-   `adr/`: 중요한 아키텍처 결정 기록 (Architecture Decision Records).
-   `research/`: 기술 연구, 벤치마킹 결과.
-   `sessions/`: 해당 프로젝트와 관련된 모든 세션 기록들.

### 📂 `sessions/[YYYY-MM-DD-작업명]/`
특정 날짜에 수행된 작업의 로그, 에러 리포트, 해결 과정 등을 기록합니다.

-   `session-log.md`: 해당 세션의 작업 흐름 요약.
-   `error-report.md`: 발생한 버그나 문제에 대한 상세 리포트.
-   `solution-proposal.md`: 문제 해결을 위해 제시된 아이디어.
-   `troubleshooting.md`: 실제 문제 해결 과정 기록.

### 📂 `templates/`
`adr-template.md`, `project-overview-template.md` 등 다양한 문서 작성을 위한 표준 템플릿을 보관합니다.

## 3. 핵심 협업 프로토콜 (v2.2)

실제 프로젝트 로그 분석을 통해 도출된 아래의 핵심 프로토콜들은 협업의 안정성과 효율성을 높이기 위해 반드시 준수해야 합니다. (상세 내용은 `GEMINI.md`와 `CLAUDE.md` 참조)

#### 1. 하이브리드 파일 수정 프로토콜
- **문제점**: AI의 파일 수정 실패(Silent Failure)와 단순 작업의 비효율성을 동시에 해결합니다.
- **규칙 (2단계 접근법):**
    - **1단계 (단순 수정):** 간단한 변수명 변경이나 한 줄 수정 등은 `replace` 도구를 사용하여 즉시 수정을 시도합니다.
    - **2단계 (복잡 수정 및 1단계 실패 시):** `replace` 사용이 부적절하거나 실패할 경우, **"Staged Write (단계적 쓰기)"** 로 전환합니다. AI는 수정사항을 새 파일(예: `main_v2.cpp`)로 생성하고, 감독자(Gemini/사용자)가 검증 후 직접 원본을 교체합니다.

#### 2. 명시적인 문서화 등급 (Tier) 시스템
- **문제점**: '자발적 문서화' 규칙의 모호성을 해결합니다.
- **규칙**: 작업 명세서에 문서화 요구 수준을 **Tier 0(주석), Tier 1(README), Tier 2(사용자 가이드)** 와 같이 명시적으로 요구합니다.

#### 3. 기능 보존을 위한 테스트 체크리스트
- **문제점**: 버그 수정 시 다른 기능이 망가지는 '기능 회귀'를 방지합니다.
- **규칙**: 버그 수정 요청 시, '수정 후에도 반드시 유지되어야 할 핵심 기능 목록'을 체크리스트 형태로 함께 전달합니다.

#### 4. 선제적 의존성 확인
- **문제점**: 작업 중간에 외부 라이브러리 등 의존성 문제로 작업이 중단되는 것을 방지합니다.
- **규칙**: 프로젝트 계획 단계에서 필요한 모든 외부 의존성을 미리 파악하고, 구현 시작 전 사용자에게 설치 여부 확인을 요청합니다.

## 4. 사용 방법 및 워크플로우

### 새로운 프로젝트 시작 시
1.  `mkdir -p .kb/projects/my-new-project`
2.  `cp .kb/templates/project-overview-template.md .kb/projects/my-new-project/project-overview.md`
3.  `project-overview.md`를 작성하여 프로젝트의 목표와 문서화 수준을 정의합니다.
4.  **`cp .kb/templates/specification-template.md .kb/projects/my-new-project/spec.md` 와 같이 템플릿을 사용하여 명세서를 작성합니다.**

### 일일 개발 세션 시작 시
1.  `mkdir -p .kb/sessions/2025-08-16-feature-login`
2.  해당 폴더에 작업 로그, 에러 리포트 등을 기록합니다.

## 5. 온보딩 및 템플릿 사용 규칙 (v2.3)

### 온보딩 절차
- **규칙:** 프로젝트에 새로 참여하거나 프로토콜의 주요 버전이 업데이트될 경우, 모든 AI 에이전트는 `GEMINI.md`, `CLAUDE.md`, `.kb/README.md` 뿐만 아니라, `.kb/projects/protocol-meta/` 폴더의 핵심 철학 및 설계 문서를 읽어 협업의 기본 원칙을 숙지해야 합니다.

### 템플릿 사용
- **규칙:** 모든 명세서와 체크리스트 작성 시, `.kb/templates`에 있는 최신 템플릿을 반드시 사용해야 합니다.

## 6. 협업 가이드

**파일 수정 원칙:** 이 Knowledge Base 내의 모든 문서를 수정할 때는, 절대 내용을 요약하거나 생략해서는 안 됩니다. 항상 파일의 전체 내용을 읽고, 수정한 뒤, 완전한 내용으로 다시 저장해야 합니다.

(자세한 AI 협업 규칙은 `GEMINI.md`와 `CLAUDE.md`를 참조하십시오.)

---
**이 Knowledge Base는 살아있는 문서입니다. 지속적인 업데이트와 개선을 통해 협업의 질을 높여나가세요.**