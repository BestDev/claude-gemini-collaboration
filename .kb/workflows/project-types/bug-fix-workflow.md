# 버그 수정 워크플로우

## 특징
- **우선순위**: 높음 (신속한 처리 필요)
- **사용자 개입**: 낮음 (계획 승인만)
- **위험도**: 중간 (기존 기능에 영향 가능)

## 단계별 프로세스

### 1. 사용자 요청 (긴급도 확인)
```
예시: "로그인 기능에서 특정 이메일 형식이 거부되는 버그가 있어"
```

### 2. Gemini 초기 분석 (5-10분)
**분석 항목:**
- [ ] 버그 재현 조건 파악
- [ ] 영향 범위 추정 (파일, 사용자 수)
- [ ] 긴급도 평가 (Critical/High/Medium/Low)
- [ ] 관련 파일 식별

**출력물:**
- 버그 분석 보고서
- 수정 계획 (Hot-fix vs 정규 수정)

### 3. 사용자 승인 (긴급도에 따라 조정)
- **Critical**: 즉시 진행 승인
- **High**: 간단한 계획 검토 후 승인
- **Medium/Low**: 상세 계획 검토

### 4. Gemini 상세 명세서 작성
**포함 요소:**
- 정확한 버그 위치 (파일:라인)
- 기대 동작 vs 실제 동작
- 수정 방법 (최소 침습적 접근)
- 회귀 테스트 계획
- 롤백 계획

### 5. Claude 구현
**우선순위 작업:**
1. 실패 테스트 케이스 작성 (TDD)
2. 최소한의 코드 수정
3. 테스트 통과 확인
4. 회귀 테스트 실행
5. 관련 문서 업데이트

### 6. 검증 및 배포 준비
- [ ] 전체 테스트 스위트 실행
- [ ] 코드 품질 검사
- [ ] Hot-fix 브랜치 생성 (필요시)
- [ ] 배포 가이드 작성

## Subagents 활용

### 권장 Subagents
- **general-purpose**: 복잡한 버그 패턴 검색
- **TestGenerator**: 회귀 테스트 자동 생성
- **SecurityAuditor**: 보안 관련 버그 검증

### 사용하지 않는 Subagents
- **DocGenerator**: 긴급 상황에서는 생략 가능
- **RefactorAgent**: 버그 수정에 집중, 리팩토링은 별도 진행

## 문서화 요구사항

### 필수 문서
- `.kb/problem-solving/bugs/YYYY-MM-DD-[버그명].md`
- 버그 수정 커밋 메시지 (상세)

### 선택적 문서
- 사후 분석 보고서 (Major 버그인 경우)
- 예방 조치 가이드

## 품질 기준

### 수정 품질
- [ ] 버그 완전 해결
- [ ] 사이드 이펙트 없음
- [ ] 기존 테스트 모두 통과
- [ ] 새로운 테스트 추가

### 코드 품질
- [ ] 최소한의 변경
- [ ] 명확한 변경 이유
- [ ] 코딩 컨벤션 준수

## 에스컬레이션 조건

### Gemini → 사용자
- 버그 원인을 찾을 수 없는 경우
- 대규모 아키텍처 변경이 필요한 경우
- 다른 시스템에 영향을 줄 수 있는 경우

### Claude → Gemini
- 수정 시도가 실패한 경우
- 예상보다 복잡한 의존성 발견
- 테스트 실패가 지속되는 경우

## 성공 지표
- **수정 완료 시간**: Critical(1시간), High(4시간), Medium(1일)
- **회귀 버그 발생률**: 0%
- **테스트 커버리지**: 버그 영역 100%